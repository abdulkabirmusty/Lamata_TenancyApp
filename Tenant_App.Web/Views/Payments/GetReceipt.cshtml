@model Tenant_App.Models.DataObjects.PaymentDtos.PaymentDto
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = ViewBag.ProjectTitle + "::  " + "Receipt";

    Layout = "~/Views/Shared/_Secured.cshtml";
}

<link rel="stylesheet" href="~/TenancyAsset/css/styleReceipt.css">

<div class="container-fluid content-top-gap">

    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb my-breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Dashboard", new { area = "" })">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Payments", new { area = "" })">Payment</a></li>
            <li class="breadcrumb-item active" aria-current="page">Receipt</li>
        </ol>
    </nav>

    <div class="cards__heading">
        <h3>Payment Receipt</h3>
    </div>

    <div class="card card_border p-lg-5 p-3 mb-4">
        <div class="card-body py-3 p-0">
            
            <div class="row">

				<div class="container">
					<div class="row gutters">
						<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
							<div class="card">
								<div class="card-body p-0">
									<div class="invoice-container">
										<div class="invoice-header">
											<!-- Row start -->
											<div class="row gutters">
												<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
													<div class="custom-actions-btns mb-5">
														<a href="#" class="btn btn-primary" id="download-btn">
															<i class="icon-download"></i> Download
														</a>
														<a href="#" class="btn btn-secondary" id="print-btn">
															<i class="icon-printer"></i> Print
														</a>
													</div>
												</div>
											</div>
											<!-- Row end -->
											<!-- Row start -->
											<div class="row gutters">
												<a href="index.html">
													@* <img src="~/TenancyAsset/images/lamata.png" alt="" title="Your logo" class="img-fluid" style="height:50px;" /> *@
													<img src="~/TenancyAsset/images/lamata.png" alt="" style="max-width: 100%; max-height: 70px;" />
												</a>
												<div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
													
													<a href="index.html" class="invoice-logo">
														Rental Receipt
													</a>
												</div>
												<div class="col-lg-6 col-md-6 col-sm-6">
													<address class="text-right">
														
													</address>
												</div>
											</div>
											<!-- Row end -->
											<!-- Row start -->
											<div class="row gutters">
												<div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
													<div class="invoice-details">
														<strong>Name: @Model.FullName</strong><br />
														<strong>Expiry Date: @Model.ExpiryDate</strong>
													</div>
												</div>
												<div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
													<div class="invoice-details">
														<div class="invoice-num">
															<div><strong>RRR Number - @Model.RRR</strong></div>
															<div><strong>Date - @Model.PaymentDate</strong></div>
														</div>
													</div>
												</div>
											</div>
											<!-- Row end -->
										</div>
										<div class="invoice-body">
											<!-- Row start -->
											<div class="row gutters">
												<div class="col-lg-12 col-md-12 col-sm-12">
													<div class="table-responsive">
														<table class="table custom-table m-0">
															<thead>
																<tr>
																	<th>Hostel Name</th>
																	<th>Property Address</th>
																	<th>Duration</th>
																	<th>Amount</th>
																</tr>
															</thead>
															<tbody>
																<tr>
																	<td>
																		@Model.PropertyName
																	</td>
																	<td>@Model.PropertyAddress</td>
																	<td>@Model.Duration</td>
																	<td><span>&#8358;</span> @Model.Amount</td>
																</tr>
																
																<tr>
																	<td>&nbsp;</td>
																	<td colspan="2">
																		<h5 class="text-primary"><strong>Grand Total</strong></h5>
																	</td>
																	<td>
																		<h5 class="text-primary"><strong><span>&#8358;</span>@Model.Amount</strong></h5>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											<!-- Row end -->
										</div>
										@* <div class="invoice-footer">
											Thank you
										</div> *@
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
             
            </div>
        </div>
    </div>
</div>


<script>
	document.getElementById('download-btn').addEventListener('click', function (e) {
		e.preventDefault();
		// Replace this URL with the actual endpoint that generates the PDF
		window.location.href = '/Payments/DownloadReceipt?id=@Model.Id';
	});

	document.getElementById('print-btn').addEventListener('click', function (e) {
		e.preventDefault();
		window.print();
	});
</script>